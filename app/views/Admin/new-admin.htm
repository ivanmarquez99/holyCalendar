<div id="background" class="vh-100">
  <div class="d-flex flex-column w-75 m-auto p-4">
    <div class="bg-dark text-light rounded-5 p-5 row">
      <h5>Filtrar por fechas</h5>
      <div class="form-group mb-2 col">
        <label for="min" class="form-label">Fecha de comienzo</label>
        <input type="date" class="datetimepicker form-control" id="min" name="min">
      </div>
      <div class="form-group mb-2 col">
        <label for="max" class="form-label">Fecha de fin</label>
        <input type="date" class="form-control" id="max" name="max" datepicker="false">
      </div>
    </div>
    <div class="bg-dark mt-3 p-4 text-light rounded-5">
      <table class="table table-striped table-hover table-light" id="myTable" aria-describedby="myTable_info">
        <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Nombre</th>
            <th scope="col">Descripción</th>
            <th scope="col">Organizador</th>
            <th scope="col">Fecha</th>
            <th scope="col">Hora de inicio</th>
            <th scope="col">Ubicación</th>
            <th scope="col">Participantes</th>
          </tr>
        </thead>
        <tbody>
          <repeat group="{{ @anteriores_eventos }}" value="{{ @evento }}">
            <tr>
              <th>{{trim(@evento.id)}}</th>
              <th>{{trim(@evento.title)}}</th>
              <td><button class="btn btn-primary" id="descriptionModal{{ trim(@evento.id) }}"
                  data-description="{{ trim(@evento.description) }}" onclick="descriptionModal(this.id)">Ver
                  descripción</button></td>
              <td>{{trim(@evento.organizer)}}</td>
              <td>{{trim(@evento.date)}}</td>
              <td>{{trim(@evento.hour)}}</td>
              <td>{{trim(@evento.ubication)}}</td>
              <td><button class="btn btn-primary" id="descriptionModal{{ trim(@evento.id) }}" data-toggle="modal"
                  data-target="#participantsModal"
                  onclick="participantsModal(this.id); loadParticipants('{{ trim(@evento.id) }}');"><i
                    class="bi bi-search"></i></button></td>
            </tr>
          </repeat>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal fade" id="modalDescription" tabindex="-1" role="dialog" aria-labelledby="modalDescription"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventTitle"><i class="bi bi-archive"></i> Descripción</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p><strong>Descripción:</strong> <span id="eventDescription"></span></p>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="participantsModal" tabindex="-1" role="dialog" aria-labelledby="participantsModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="participantsModalLabel">Participantes del evento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-striped table-hover table-light" id="participants" aria-describedby="myTable_info">
          <thead>
            <tr>
              <th scope="col">Nombre</th>
              <th scope="col">Correo</th>
              <th scope="col">Rol</th>
              <th scope="col">¿Asistió?</th>
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<template>
  <form method="POST" action="admin/asistio">
    <!-- Esto puede ser value true or false dependiendo si asistió o no -->
    <input type="hidden" value="" name="participa" id="participa">
    <input type="hidden" value="" name="userId">
    <input type="hidden" value="" name="eventId">
    <button class="btn btn-success" type="submit" id="si-asistio"><i class="bi bi-check2"></i></button>
    <button class="btn btn-danger" type="submit" id="no-asistio"><i class="bi bi-x-lg"></i></button>
  </form>
</template>

<script src="{{@BASE}}/ui/js/dataTables.js"></script>